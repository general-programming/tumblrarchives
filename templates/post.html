{% extends "base.html" %}

{% set active_page = "post" %}

{% block content: %}

<div class="container">
	<div id="body" class="row">
		<div class="col-md-12">
			<h1> Post {{post['id']}} </h1>
			<hr>
			<h2> JSON <small> <a href="{{url_for("post", postid=post.data['id'], json=1)}}"> raw </a></small> </h2>
			<code> {{post.data|tojson}} </code>
			<hr>
			<h2> Formatted </h2>
			<table class="table table-bordered table-hover table-striped">
				<tbody>
					{% for x in post.data %}
					<tr>
						<td> {{x}} </td>
						<td> {{post.data[x]}} </td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
			<hr>
			<h1> Preview </h1>
		</div>
		<div class="col-md-12 post">
			{% if post.data['title'] %} <div class="post_title"> <h1> {{post.data['title']|safe}} </h1> </div> {% endif %}
			{% if 'photos' in post.data %}
			<div class="post_photos">
				{% for image in post.data['photos'] %}
				<img src="{{image['original_size']['url']}}" class="img-responsive">
				{% endfor %}
			</div>
			{% endif %}
			{% if post.data['body'] %} <div class="post_body"> {{post.data['body']|safe}} </div> {% endif %}
			{% if post.data['caption'] %} <div class="post_caption"> {{post.data['caption']|safe}} </div> {% endif %}
			<div class="bottom">
				<i class="fa fa-pencil fa-lg">
					<b> Posted {{post.data['date']}}. {{post.data['note_count']}} notes. </b>
				</i>
				<i style="float: right" class="fa fa-retweet"> <a href="http://tumblr.com/reblog/{{post.data['id']}}/{{post.data['reblog_key']}}"> Reblog </a> </i>
				<!-- XXX make tags work -->
				{% if post.data['tags'] %} <p> Tags: {% for tag in post.data['tags'] %} <a href="{{url_for("archive", url=url, tag=tag)}}">{{tag}}</a>, {% endfor %}</p> {% endif %}
			</div>
		</div>
	</div>
</div>
{% endblock %}